# git 冲突场景和解决方式

## git 的冲突场景

- 当多个分支的代码合并到一个分支时代码会发生冲突
- 多个分支代码向同一个远程分支推送

1. 当多个分支修改了同一个文件的相同地方, 或者多个分支修改了同一个文件的名称会发生冲突

2. 注意修改的是同一个文件的公共内容, 如果修改的不是公共内容是不会发生冲突的。

### 代码实际操作

#### 第一种情况的演示 本地分支合并冲突

0. 创建一个新的分支 fix

1. 在 master 分支上修改 `git.md` 文件的内容, 然后提交代码。
2. 切换到 fix 分支上，修改 `git.md` 的文件内容，提交并切换到主分支上
3. 在主分支 执行 `git merge fix` 命令此时就会发生合并冲突。

![image-20230701102822746](https://cyzblog-1305365553.cos.ap-guangzhou.myqcloud.com/image-20230701102822746.png)



此时的分支提交情况

![image-20230701104232073](https://cyzblog-1305365553.cos.ap-guangzhou.myqcloud.com/image-20230701104232073.png)

![image-20230701104258093](https://cyzblog-1305365553.cos.ap-guangzhou.myqcloud.com/image-20230701104258093.png)

手动解决冲突

此时选择你需要的内容删除不需要的代码进行合并，在对每个文件使用 `git add` 来将其标记为冲突已解决，在之后使用` git commit` 提交合并冲突的



#### 第二种情况的测试

1. 你在 fix 分支中 `git.md` 修改内容，在 master 分支中合并，并提交
2. 另外一个同事 在 feature 分支也修改了 `git.md` 文件中的内容，同时准备向远程分支合并
3. 那么他会先从远程分支拉取 master 最新提交的代码，拉取之后因为 `git.md` 两个文件的内容不同会发生冲突

![image-20230701110814228](https://cyzblog-1305365553.cos.ap-guangzhou.myqcloud.com/image-20230701110814228.png)


同样此时需要你进行 手动解决冲突， 并 `git add .` 执行该命令标记冲突已经解决

:::tip
注意：如果当前分支的每一个提交都存在另一个分支上, git 就会执行一个快速向前的操作，不会发生冲突
:::

0. 修改 master 分支中 `git.md` 的内容，然后提交
1. 创建一个新分支 b2
2. 切换到 b2 分支修改 `git.md` 文件的内容，然后提交
3. 之后切换到 master 分支中，合并 b2 分支的内容

此时不会发生冲突，因为 b2 分支拥有 master 分支所有的提交，此时的 `git.md` 文件的内容就是 b2 分支修改的内容

