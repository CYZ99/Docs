# 运输层服务以及UDP

## 运输层

运输层位于应用层和网络层中间，是分层体系结构的重要组成部分。

网络层提供了不同主机间的通信，运输层协议在不同主机上的应用进程之间提供了逻辑通信功能。

:::tip
几个相关术语
- 运输层的分组称为 “报文段”, 而网络层的分组称为 数据报
:::

在运输层中 因特网有两种运输层协议 主要是 TCP UDP

在网络层的 IP 协议提供了尽力而为交付服务，不保证报文段的交付，不保证报文段的按序交付，不保证报文段中数据的完整性。

UDP和TCP最基本的服务是将两个端系统之间的IP的交付服务扩展为运行在端系统之间的两个进程之间的交付服务。

## 多路复用和多路分解

多路分解就是将 运输层报文段中的数据交付到对应的套接字中，

多路复用在源主机中从不同的套接字收集数据块，添加上首部形成报文段，然后将报文段传递到网络层中称为多路复用


## UDP

在RFC定义的 UDP 中只是做了运输层协议能够做的少数工作，多路复用和多路分解以及部分的 差错检测。

### UDP 的特点

1. 无须建立连接

在 TCP中开始传输数据之前需要三次握手建立连接 UDP 却不需要任何准备即可进行数据传输。
因此 UDP 不会引入建立连接的时延。

2. 无连接状态

TCP 需要在端系统之间维护连接状态。包括发送缓存，拥塞控制参数以及序列号确认号的参数。UDP 则不需要维护这些状态。

3. 分组头部开销小。每个 TCP报文段都有 20字节的首部开销，而 UDP 仅需要 8 字节的开销。

### UDP 的头部

![image-20230625135259137](https://cyzblog-1305365553.cos.ap-guangzhou.myqcloud.com/image-20230625135259137.png)

